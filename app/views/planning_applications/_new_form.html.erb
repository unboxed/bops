<%= form_with model: @planning_application, local: true, builder: GOVUKDesignSystemFormBuilder::FormBuilder do |form| %>
 
 <% if @planning_application.errors.any? %>
    <span id="status-error" class="govuk-error-message">
      <span class="govuk-visually-hidden">
        <h2>
          <%= pluralize(@planning_application.errors.count, "error") %>
          prohibited this @planning_application from being saved:
        </h2>
      </span>
      <ul>
        <% @planning_application.errors.map do |error| %>
          <li><%= error.type %></li>
        <% end %>
      </ul>
    </span>
  <% end %>

  <%= form.hidden_field :application_type, :value => "lawfulness_certificate" %>
  <div class="govuk-form-group govuk-!-margin-top-8">
    <h2 class="govuk-heading-m">
      Description
    </h2>
    <p class="govuk-body">
      <%= @planning_application.description %>
    </p>
    <p class="govuk-body">
      <%= form.label :description, "Description", class: "govuk-heading-m govuk-!-margin-bottom-1" %>
      <%= form.text_area :description, class: "govuk-textarea", rows: "5" %>
    </p>
  </div>
  <div class="govuk-form-group govuk-!-margin-top-8">
    <%= form.govuk_date_field :created_at, legend: { text: 'Date received', size: 'm' } %>
  </div>
  <div class="govuk-form-group govuk-!-margin-top-8">
    <h2 class="govuk-heading-m">
      Site Details
    </h2>
    <%= form.label :address_1, class: "govuk-label" %>
    <%= form.text_field :address_1, class: "govuk-textarea" %>
    <%= form.label :address_2, class: "govuk-label" %>
    <%= form.text_field :address_2, class: "govuk-textarea" %>
    <%= form.label :town, class: "govuk-label" %>
    <%= form.text_field :town, class: "govuk-textarea govuk-input govuk-!-width-two-thirds" %>
    <%= form.label :county, class: "govuk-label" %>
    <%= form.text_field :county, class: "govuk-textarea govuk-input govuk-!-width-two-thirds" %>
    <%= form.label :postcode, class: "govuk-label" %>
    <%= form.text_field :postcode, class: "govuk-textarea govuk-input--width-10" %>
    <%= form.label :uprn, "UPRN", class: "govuk-label" %>
    <%= form.text_field :uprn, class: "govuk-textarea govuk-input--width-10" %>
  </div>
  <div class="govuk-form-group govuk-!-margin-top-8">
    <div class="govuk-radios--inline">
      <%= form.label :work_status, "Has the work been started?", class: "govuk-heading-m", for: "work_status" %>
      <%= form.govuk_radio_button :work_status, "existing", label: { text: 'Yes' } %>
      <%= form.govuk_radio_button :work_status, "proposed", label: { text: 'No' } %>
    </div>
  </div>
  <div class="govuk-form-group govuk-!-margin-top-8 applicant-information">
    <h2 class="govuk-heading-m">
      Applicant information
    </h2>
    <%= form.label :applicant_first_name, "First name", class: "govuk-label" %>
    <%= form.text_field :applicant_first_name, class: "govuk-textarea govuk-input govuk-!-width-two-thirds" %>
    <%= form.label :applicant_last_name, "Last name", class: "govuk-label" %>
    <%= form.text_field :applicant_last_name, class: "govuk-textarea govuk-input govuk-!-width-two-thirds" %>
    <%= form.label :applicant_email, "Email address", class: "govuk-label" %>
    <%= form.text_field :applicant_email, class: "govuk-textarea govuk-input govuk-!-width-two-thirds" %>
    <%= form.label :applicant_phone, "UK telephone number", class: "govuk-label" %>
    <%= form.text_field :applicant_phone, class: "govuk-textarea govuk-input govuk-!-width-two-thirds" %>
  </div>
  <div class="govuk-form-group govuk-!-margin-top-8 agent-information">
    <h2 class="govuk-heading-m">
      Agent information
    </h2>
    <%= form.label :agent_first_name, "First name", class: "govuk-label" %>
    <%= form.text_field :agent_first_name, class: "govuk-textarea govuk-input govuk-!-width-two-thirds" %>
    <%= form.label :agent_last_name, "Last name", class: "govuk-label" %>
    <%= form.text_field :agent_last_name, class: "govuk-textarea govuk-input govuk-!-width-two-thirds" %>
    <%= form.label :agent_email, "Email address", class: "govuk-label" %>
    <%= form.text_field :agent_email, class: "govuk-textarea govuk-input govuk-!-width-two-thirds" %>
    <%= form.label :agent_phone, "UK telephone number", class: "govuk-label" %>
    <%= form.text_field :agent_phone, class: "govuk-textarea govuk-input govuk-!-width-two-thirds" %>
  </div>
  <div class="govuk-form-group govuk-!-margin-top-8">
    <%= form.label :payment_reference, class: "govuk-heading-m" %>
    <%= form.text_field :payment_reference, class: "govuk-textarea govuk-input govuk-!-width-two-thirds" %>
  </div>
  <p>
    <%= form.submit "Save", class: "govuk-button govuk-!-margin-right-1", data: { module: "govuk-button" } %>
    <%= link_to 'Cancel', @planning_applications_path, class: "govuk-button govuk-button--secondary" %>
  </p>
<% end %>
