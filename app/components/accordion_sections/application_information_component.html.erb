<% if show_edit_link %>
  <%= govuk_link_to t(".edit_details"), edit_planning_application_path(planning_application), class: "govuk-body" %>
<% end %>

<hr>

<%= govuk_summary_list do |list| %>
  <% list.with_row do |row|
       row.with_key { t(".description") }
       row.with_value { render(FormattedContentComponent.new(text: planning_application.description)) }
     end %>

  <% list.with_row do |row|
       row.with_key { t(".type_description") }
       row.with_value { type_description }
     end %>

  <% if planning_application.pre_application? %>
    <% list.with_row do |row|
         row.with_key { t(".service_type") }
         row.with_value { planning_application.service_type }
       end %>
    <% list.with_row do |row|
         row.with_key { t(".requested_services") }
         if planning_application.additional_services.any?
           row.with_value { planning_application.additional_services.map { it.to_s.humanize }.join(", ") }
         else
           row.with_value { "None" }
         end
       end %>
  <% end %>

  <% list.with_row do |row|
       row.with_key { t(".full_address") }
       row.with_value { full_address }
     end %>

  <% list.with_row do |row|
       row.with_key { t(".location") }
       row.with_value { govuk_link_to(t(".view_site_on"), map_link, new_tab: true) }
     end %>

  <% if planning_application.parish_name.present? %>
    <% list.with_row do |row|
         row.with_key { t(".parish") }
         row.with_value { planning_application.parish_name }
       end %>
  <% end %>

  <% list.with_row do |row|
       row.with_key { t(".ward") }
       if planning_application.postcode.present?
         row.with_value { tag.p(planning_application.ward) + govuk_link_to(t(".view_on_mapit"), mapit_link, new_tab: true) }
       else
         row.with_value { t(".a_postcode_is") }
       end
     end %>

  <% %i[
       case_officer
       ward_type
       uprn
       work_already_started
       payment_reference
       payment_amount
       alternative_reference
       session_id
     ].each do |attribute| %>
    <% list.with_row do |row|
         row.with_key { t(".#{attribute}") }
         row.with_value { send(attribute) }
       end %>
  <% end %>
<% end %>
